# Pkg-file-service

### x) Lue ja tiivistä:
- **[Pkg-File-Service – Control Daemons with Salt – Change SSH Server Port](https://terokarvinen.com/2018/04/03/pkg-file-service-control-daemons-with-salt-change-ssh-server-port/?fromSearch=karvinen%20salt%20ssh)**
  - Package-file-servicen yleinen kaava on:
    - Halutun softan asennus
    - Konfigurointitiedoston muokkaus/korvaus
    - Demonin uudelleen käynnistys
  - SSH-palvelimen portin vaihto package-file-servicenä
    - Luodaan ssh-tiedosto komennolla `sudo nano /srv/salt/sshd.sls` ja lisätään softaan liittyvä sisältö (mm. asentaa openssh-serverin tarvittaessa ja käynnistää palvelun uudelleen, jos config tiedosto muuttuu)
    - Luodaan konfigurointitiedosto komennolla `sudo nano /srv/salt/sshd_config` ja lisätään halutut asetukset (esim. portin vaihto)
    - Sovelletaan tila kaikille minion-palvelimille komennolla `sudo salt '*' state.apply sshd`
    - Testataan, että kaikki toimii ajamalla komento `nc -vz tero.example.com 8888` tai `ssh -p 8888 tero@tero.example.com`

### a) Apache easy mode. Asenna Apache, korvaa sen testisivu ja varmista, että demoni käynnistyy
- 

### b) SSHouto. Lisää uusi portti, jossa SSHd kuuntelee.
- 

## Lähteet:
- Karvinen 2018: https://terokarvinen.com/2018/04/03/pkg-file-service-control-daemons-with-salt-change-ssh-server-port/?fromSearch=karvinen%20salt%20ssh. Luettu 22.4.2025.
- Karvinen 2025: https://terokarvinen.com/palvelinten-hallinta/#laksyt. Luettu 22.4.2025.




